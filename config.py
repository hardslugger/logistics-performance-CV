import numpy as np

# Video and Model Configuration
VIDEO_PATH = "TEST12H06.mp4"
OUTPUT_VIDEO_PATH = "Output_TEST12H06.mp4"
MODEL_PATH = "best.pt"

# ROI Definition (Original rectangular ROI is now deprecated in favor of polygonal lanes)
# The overall ROI will be calculated as the bounding box of all lanes in main.py
ROI_LEFT_RATIO = 0.2
ROI_RIGHT_RATIO = 0.9
ROI_TOP_RATIO = 0.1
ROI_BOTTOM_RATIO = 0.9

# Lane Configuration (New - Polygonal)
NUM_LANES = 6  # Updated to 6 lanes

# Normalized coordinates for the 6 polygonal lanes. Each string is a lane.
# Format: 'x1 y1 x2 y2 ...' (The initial '0' from your input is ignored)
LANE_COORDINATES_NORMALIZED = [
    "0.20015524506542473 0.06786427145708583 0.20132574357457922 0.13972055888223553 0.30901160641679604 0.13572854291417166 0.4143564722407038 0.14171656686626746 0.5021438604272936 0.13373253493013973 0.5911017471230379 0.13972055888223553 0.6695251472363916 0.14570858283433133 0.7303910697124268 0.15568862275449102 0.825201448953944 0.17165668662674655 0.867339395283507 0.18762475049900204 0.8661688967743524 0.09181636726546906 0.8205194549173259 0.0658682634730539 0.7409255562948178 0.03992015968063872 0.6566496636356917 0.023952095808383235 0.5805672605406472 0.015968063872255488 0.5103373499913753 0.011976047904191617 0.4483009290061852 0.011976047904191617 0.3733890244202952 0.017964071856287425 0.3195460929991868 0.01796407185628742 0.25633917350484214 0.023952095808383228 0.20132574357457922 0.02994011976047904",
    "0.19547325102880658 0.22554890219560877 0.19313225401049752 0.3213572854291417 0.2294589770644649 0.32167659791610553 0.44016724411923247 0.3235287270133857 0.5970159103265051 0.32490742934250005 0.8743623863384342 0.3273453093812375 0.8895788669574433 0.3233532934131736 0.8860673714299796 0.2155688622754491 0.5068258544639117 0.15169660678642716 0.19547325102880658 0.16766467065868262",
    "0.16621078829994332 0.34331337325349304 0.16972228382740692 0.471057884231537 0.4681994036618121 0.46706586826347307 0.7093220965476454 0.4630738522954092 0.8486114191370346 0.4590818363273453 0.8977723565215249 0.4570858283433134 0.8930903624849067 0.3532934131736527 0.6870826248737094 0.3532934131736527",
    "0.19430275251965207 0.5169660678642715 0.19547325102880658 0.6327345309381237 0.7502895443680541 0.6287425149700598 0.9211823267046155 0.5988023952095808 0.9129888371405337 0.499001996007984",
    "0.22005371972105173 0.6626746506986028 0.22473571375766985 0.780439121756487 0.4927798723540573 0.8223552894211577 0.7058106010201819 0.810379241516966 0.8837263744116705 0.7544910179640718 0.8907493654665977 0.6427145708582834",
    "0.2106897316478155 0.810379241516966 0.21303072866612452 0.9441117764471058 0.5372588157019295 0.9780439121756487 0.7467780488405904 0.93812375249501 0.8837263744116705 0.8822355289421158 0.8884083684482885 0.7744510978043913 0.8275424459722529 0.7884231536926147 0.6824006308370911 0.8363273453093812 0.4998028634089845 0.838323353293413 0.3031591138710234 0.8243512974051896"
]

# Excel Generation Intervals
STAGING_EXCEL_INTERVAL_SECONDS = 60  # Generate staging Excel every 1 minute
CAPACITY_EXCEL_INTERVAL_SECONDS = 900  # Generate capacity Excel every 15 minutes

# Tracking Parameters
HISTORY_LENGTH_SECONDS = 1.0  # 1 second of movement history for stationarity
MOVEMENT_THRESHOLD_PIXELS = 5  # pixels for stationarity

# Display Colors (Original colors)
CLASS_COLORS = {0: (255, 0, 255), 1: (124, 252, 0)}  # box: magenta, forklift: lime green
ROI_COLOR = (255, 255, 153)
LANE_COLOR = (100, 100, 255) # Color for drawing lane polygons
STATIONARY_COLOR = (0, 255, 255)  # cyan for stationary boxes in ROI
EXITED_COLOR = (0, 0, 255)  # red for boxes that have exited ROI
MISPLACED_COLOR = (0, 140, 255)  # orange for misplaced boxes
ALREADY_IN_STAGING_COLOR = (255, 255, 255)  # white for boxes already in staging area
MOVING_IN_ROI_COLOR = (255, 255, 0) # Yellow for moving boxes in ROI

# Dynamic ROI and Lane Calculation (will be set in main.py)
ROI_POLYGON = None # Overall bounding box of all lanes
ROI_TOTAL_AREA = 0
LANE_POLYGONS = [] # List of numpy arrays, each defining a lane's polygon
LANE_TOTAL_AREAS = []